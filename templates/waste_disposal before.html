<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Garbage Guard</title>
  <link rel="stylesheet" href="/static/css/waste_disposal.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

</head>
<body>
  <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<header>
  <nav id="menubar">
    <div id="logo">
      <a href="#">
        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" width="150" />
      </a>
    </div>

    <div id="menu1">
      <ul>
        <li><a href="/">Main</a></li>
        <li class="menu-waste">
          <a href="#">Waste disposal</a>
          <div class="submenu">
            <a href="#">Construction site registration</a>
            <a href="#">2</a>
          </div>
        </li>
        <li id="STORE"><a href="#">Analytics and Statistics</a></li>
        <li id="RESPONSIBILITY"><a href="#">Create lift</a></li>
      </ul>
    </div>
  </nav>
</header>
<br>
<br>
<br>
<br>
<br>

    <div class="input-box">
      <label for="site-search">ê±´ì„¤í˜„ì¥ì´ë¦„ ê²€ìƒ‰</label>
      <input type="text" id="site-search" placeholder="Enter network name">
      <span class="search-icon">ğŸ”</span>
    </div>
    <div class="input-box">
      <label for="site-date">ë‚ ì§œ ì„ íƒ</label>
      <input type="date" id="site-date">
    </div>
  </div>
<div class="layout-flex">
  <!-- div1: ì—…ë¡œë“œ ë°•ìŠ¤ -->
  <div id="div1">
    <div class="upload-wrapper" onclick="document.getElementById('fileInput').click();">
      <img src="https://img.icons8.com/ios-filled/100/upload-to-cloud.png" alt="Upload Icon">
      <p>jpg, png image</p>
      <button class="upload-btn">Upload</button>
      <input type="file" accept="image/*" id="fileInput">
    </div>
  </div>

  <!-- div2: ëŒ€ì‹œë³´ë“œ -->
<!--  <div id="rightColumn">-->

  <div class="dashboard-container">
    <h2 class="dashboard-title">ê³„ë£¡ê±´ì„¤ ìœ ì„±êµ¬</h2>
    <div class="dashboard-grid">
      <div class="data-box">
        <div class="icon">ğŸ“Š</div>
        <p class="label">ì „ì²´ ë°°ì¶œëŸ‰</p>
        <p class="value" id="totalEmission">0</p>
        <p class="change up" id="totalEmissionChange"></p>
      </div>
      <div class="data-box">
        <div class="icon">ğŸ“Š</div>
        <p class="label">ìœ„í—˜ íê¸°ë¬¼</p>
        <p class="value" id="hazardousWaste"></p>
        <p class="change down" id="hazardousWasteChange"></p>
      </div>
      <div class="data-box">
        <div class="icon">ğŸ“Š</div>
        <p class="label">ì¬í™œìš© ê°€ëŠ¥ëŸ‰</p>
        <p class="value" id="recyclable"></p>
        <p class="change up" id="recyclableChange"></p>
      </div>
      <div class="data-box">
        <div class="icon">ğŸ“Š</div>
        <p class="label">íƒ„ì†Œ ë°°ì¶œëŸ‰</p>
        <p class="value" id="carbonEmission">0</p>
        <p class="change up" id="carbonEmissionChange"></p>
      </div>
    </div>
<!--  </div>-->

   <div id="div3">
     <div class="chart-title">íê¸°ë¬¼ ì¢…ë¥˜ ë¹„ìœ¨</div>
     <canvas id="wasteChart" width="400" height="200"></canvas>
   </div>
     <div id="div4">
    <h3 class="section-title">íƒì§€ëœ ê°ì²´</h3>
    <ul id="objectList" class="object-list">
      <li class="object-item light">ğŸ”¹ ëª©ì¬</li>
      <li class="object-item yellow">ğŸ”¹ ì² ê·¼</li>
      <li class="object-item light">ğŸ”¹ ë²½ëŒ</li>
      <li class="object-item yellow">ğŸ”¹ ì„¬ìœ </li>
      <li class="object-item light">ğŸ”¹ í”Œë¼ìŠ¤í‹±</li>
     <li class="object-item yellow">ğŸ”¹ ìœ ë¦¬</li>
    </ul>
   </div>
  </div>
</div>

  <!-- div5: íƒ„ì†Œ ë°°ì¶œ ìˆœìœ„ -->
  <div id="div5">
    <div class="carbon-chart-wrapper">
      <h3 class="carbon-title">íƒ„ì†Œ ë°°ì¶œ ìˆœìœ„</h3>
      <canvas id="carbon-rank-canvas"></canvas>
    </div>
  </div>

<!--   div6: ì›”ë³„ íê¸°ë¬¼ëŸ‰ ê·¸ë˜í”„ -->
  <div id="div6">
    <div class="monthly-bar-chart">
      <div class="chart-title">ì›”ë³„ íê¸°ë¬¼ëŸ‰ ë¹„êµ</div>
      <canvas id="monthly-line-chart"></canvas>

    </div>
  </div>

  <!-- ìŠ¤í¬ë¦½íŠ¸: ì°¨íŠ¸ ë¡œë”© -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
<!--      drawMonthlyBarChart();-->
      drawMonthlyLineChart();
      drawPopularitySalesChart();
      drawWasteChart();


    });

    function drawMonthlyBarChart() {
      const monthlyData = [
        { month: "1ì›”", value: 120 },
        { month: "2ì›”", value: 140 },
        { month: "3ì›”", value: 100 },
        { month: "4ì›”", value: 180 },
        { month: "5ì›”", value: 160 },
        { month: "6ì›”", value: 200 }
      ];
      const container = document.getElementById("monthly-bar-container");
      container.innerHTML = "";

      monthlyData.forEach(item => {
        const barWrap = document.createElement("div");
        barWrap.style.display = "flex";
        barWrap.style.flexDirection = "column";
        barWrap.style.alignItems = "center";

        barWrap.innerHTML = `
          <div class="month-bar" style="height: ${item.value}px;"><span>${item.value}</span></div>
          <div class="month-label">${item.month}</div>
        `;
        container.appendChild(barWrap);
      });
    }

    function drawMonthlyLineChart() {
      const ctx = document.getElementById("monthly-line-chart").getContext("2d");
      new Chart(ctx, {
        type: "line",
        data: {
          labels: ["1ì›”", "2ì›”", "3ì›”", "4ì›”", "5ì›”", "6ì›”"],
          datasets: [
            {
              label: "ì˜ˆìƒ íê¸°ë¬¼ëŸ‰",
              data: [120, 140, 110, 150, 130, 160],
              borderColor: "#ffd54f",
              backgroundColor: "rgba(255, 213, 79, 0.2)",
              fill: true,
              tension: 0.3,
            },
            {
              label: "ì‹¤ì œ íê¸°ë¬¼ëŸ‰",
              data: [100, 130, 95, 180, 145, 155],
              borderColor: "#4caf50",
              backgroundColor: "rgba(76, 175, 80, 0.2)",
              fill: true,
              tension: 0.3,
            },
          ]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: "íê¸°ë¬¼ëŸ‰ (kg)"
              }
            }
          }
        }
      });
    }

document.addEventListener("DOMContentLoaded", () => {
  const ctx = document.getElementById("carbon-rank-canvas").getContext("2d");

  const labels = ['í”Œë¼ìŠ¤í‹±', 'ì„ìœ ', 'ì² ë¥˜', 'ì½˜í¬ë¦¬íŠ¸'];
  const popularity = [46, 17, 19, 29]; // ë§‰ëŒ€ ê¸¸ì´
  const colors = ['#f4a261', '#a8dadc', '#457b9d', '#cdb4db'];
  const sales = ['46%', '17%', '19%', '29%']; // í¼ì„¼íŠ¸ í…ìŠ¤íŠ¸

  const data = {
    labels: labels,
    datasets: [{
      label: 'íƒ„ì†Œ ë°°ì¶œëŸ‰',
      data: popularity,
      backgroundColor: colors,
      borderRadius: 10,
      barThickness: 24,
    }]
  };

  const options = {
    indexAxis: 'y',
    plugins: {
      legend: { display: false },
      tooltip: {
        enabled: false // íˆ´íŒ ì œê±°
      },
      datalabels: {
        align: 'end',
        anchor: 'end',
        color: '#fff',
        font: {
          weight: 'bold',
          size: 14
        },
        formatter: (value, context) => sales[context.dataIndex]
      }
    },
    scales: {
      x: {
        beginAtZero: true,
        display: false // ì¶• ìˆ¨ê¹€
      },
      y: {
        ticks: {
          color: '#fff',
          font: {
            size: 14
          }
        },
        grid: {
          display: false
        }
      }
    }
  };

  new Chart(ctx, {
    type: 'bar',
    data: data,
    options: options,
    plugins: [ChartDataLabels] // í¼ì„¼íŠ¸ í…ìŠ¤íŠ¸ìš© í”ŒëŸ¬ê·¸ì¸
  });
});




  const objectList = document.getElementById('object-list');

  // ì˜ˆì‹œ: ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì‹  (ì—¬ê¸°ì„  2ì´ˆë§ˆë‹¤ ëª¨ì˜ ë°ì´í„° ì¶”ê°€)
  const mockDetectedObjects = ['ëª©ì¬', 'ì² ê·¼', 'ë²½ëŒ', 'ì„¬ìœ ', 'í”Œë¼ìŠ¤í‹±', 'ìœ ë¦¬'];
  let index = 0;

  setInterval(() => {
    if (index < mockDetectedObjects.length) {
      const name = mockDetectedObjects[index++];
      addDetectedObject(name);
    }
  }, 2000); // 2ì´ˆë§ˆë‹¤ í•˜ë‚˜ì”© ì¶”ê°€

  function addDetectedObject(name) {
    const item = document.createElement('div');
    item.className = 'item';
    item.innerHTML = `ğŸ” ${name}`;
    objectList.appendChild(item);
  }

    document.addEventListener('DOMContentLoaded', () => {
  const wasteCtx = document.getElementById('wasteChart').getContext('2d');

  new Chart(wasteCtx, {
    type: 'bar',
    data: {
      labels: ['ì½˜í¬ë¦¬íŠ¸', 'ì² ê·¼/ê¸ˆì†', 'ëª©ì¬', 'ìœ ë¦¬', 'í”Œë¼ìŠ¤í‹±', 'ì„ë©´'],
      datasets: [{
        label: 'ë¹„ìœ¨',
        data: [180000, 200000, 220000, 243000, 210000, 100000],
        backgroundColor: '#ffff99',
        borderRadius: 10,
        barPercentage: 0.6,
        categoryPercentage: 0.7
      }]
    },
    options: {
      plugins: {
        tooltip: {
          callbacks: {
            label: function(context) {
              const value = context.raw;
              return `${(value / 1000).toFixed(0)}K`;
            }
          }
        },
        legend: {
          display: false
        }
      },
      scales: {
        x: {
          ticks: {
            color: 'white',
            font: { size: 12 }
          },
          grid: {
            display: false
          }
        },
        y: {
          ticks: {
            color: 'white',
            callback: function(value) {
              return value / 1000 + 'K';
            }
          },
          grid: {
            color: '#444'
          }
        }
      }
    }
  });
});

  document.addEventListener("DOMContentLoaded", () => {
    const data = {
      totalEmission: { value: 7265, change: 11.01 },
      hazardousWaste: { value: 3671, change: -0.03 },
      recyclable: { value: 256, change: 15.03 },
      carbonEmission: { value: 2318, change: 6.08 }
    };

    for (const key in data) {
      const valueEl = document.getElementById(key);
      const changeEl = document.getElementById(`${key}Change`);

      if (valueEl && changeEl) {
        const value = data[key].value.toLocaleString();
        const change = data[key].change;
        const changeText = (change > 0 ? "+" : "") + change.toFixed(2) + "%";

        valueEl.textContent = value;
        changeEl.textContent = changeText;
        changeEl.classList.add(change >= 0 ? "up" : "down");
      }
    }
  });
</script>









</body>
</html>

